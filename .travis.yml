language: node_js
node_js:
   - node
dist: trusty
sudo: required
services:
     - docker
env:
     - DOCKS_API_ADDRESS=127.0.0.1:8080
addons:
    chrome: stable
cache:
    npm: true
    directories:
        - node_modules
before_script:
     - docker swarm init
     - docker stack deploy -c docker-compose-api.yml docks-api
     - npm install -g --silent @angular/cli

script:
   - ng test --no-progress
